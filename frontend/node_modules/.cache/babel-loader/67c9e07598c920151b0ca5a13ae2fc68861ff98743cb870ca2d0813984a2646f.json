{"ast":null,"code":"var _jsxFileName = \"/Users/davisnguyen/projects/crimecompass/frontend/src/components/CrimeMap.tsx\",\n  _s = $RefreshSig$();\n// Import packages\nimport React, { useState, useEffect } from 'react';\nimport { GoogleMap, LoadScript, Marker } from '@react-google-maps/api';\nimport { useDispatch } from 'react-redux';\nimport { setLocation } from '../redux/actions';\nimport '../styles/CrimeMap.css';\nimport ReportForm from '../components/ReportForm';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst mapStyles = [{\n  featureType: \"poi\",\n  elementType: \"labels\",\n  stylers: [{\n    visibility: \"off\"\n  }],\n  disableDoubleClickZoom: true,\n  // Add this line\n  clickableIcons: false\n}];\nconst CrimeMap = () => {\n  _s();\n  const dispatch = useDispatch();\n  const [markerPosition, setMarkerPosition] = useState(null);\n  const [address, setAddress] = useState(\"\"); // String or null value, will be initialized to null when app starts\n  const [map, setMap] = useState(null);\n  const [mapCenter, setMapCenter] = useState({\n    lat: 37.8044,\n    lng: -122.2712\n  }); // Initial center\n\n  const [locations, setLocations] = useState([]);\n  const geocodeLatLng = async (lat, lng) => {\n    const geocoder = new google.maps.Geocoder();\n    const latlng = {\n      lat,\n      lng\n    };\n    return new Promise((resolve, reject) => {\n      geocoder.geocode({\n        location: latlng\n      }, (results, status) => {\n        if (status === \"OK\") {\n          if (results && results[0]) {\n            resolve(results[0].formatted_address);\n          } else {\n            reject(\"No results found\");\n          }\n        } else {\n          reject(\"Geocoder failed due to: \" + status);\n        }\n      });\n    });\n  };\n\n  // Fetch Locations\n  useEffect(() => {}, []);\n  const handleMapClick = async event => {\n    const latitude = event.latLng.lat();\n    const longitude = event.latLng.lng();\n    const newCenter = {\n      lat: latitude,\n      lng: longitude\n    };\n    setMapCenter(newCenter);\n    setMarkerPosition({\n      lat: latitude,\n      lng: longitude\n    });\n    map === null || map === void 0 ? void 0 : map.panTo(new google.maps.LatLng(latitude, longitude));\n    try {\n      const fetchedAddress = await geocodeLatLng(latitude, longitude); // Using await here\n      setAddress(fetchedAddress);\n      dispatch(setLocation(fetchedAddress));\n    } catch (error) {\n      console.error(\"Error getting address:\", error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"crime-map-wrapper\",\n    children: /*#__PURE__*/_jsxDEV(LoadScript, {\n      googleMapsApiKey: 'AIzaSyCLu25wqirs0pAPnvjvH4hV4Se7Kcpzmps',\n      children: /*#__PURE__*/_jsxDEV(GoogleMap, {\n        mapContainerClassName: \"crime-map-container\",\n        center: mapCenter // Default center (San Francisco)\n        ,\n        zoom: 13,\n        onClick: handleMapClick,\n        onLoad: map => setMap(map),\n        options: {\n          styles: mapStyles,\n          disableDoubleClickZoom: true,\n          mapTypeControl: false,\n          clickableIcons: false\n        },\n        children: [/*#__PURE__*/_jsxDEV(ReportForm, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 21\n        }, this), markerPosition && /*#__PURE__*/_jsxDEV(Marker, {\n          position: markerPosition\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 40\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 9\n  }, this);\n};\n_s(CrimeMap, \"6sHlymqfz48RcMyUbilIlt56aX0=\", false, function () {\n  return [useDispatch];\n});\n_c = CrimeMap;\nexport default CrimeMap;\n\n// Issues to fix after lunch. Fix how it looks in mobile. \n// Setup Database\n// Check for anymore other errors when using. \n// Retype each line of code so you remember how to use it. \nvar _c;\n$RefreshReg$(_c, \"CrimeMap\");","map":{"version":3,"names":["React","useState","useEffect","GoogleMap","LoadScript","Marker","useDispatch","setLocation","ReportForm","jsxDEV","_jsxDEV","mapStyles","featureType","elementType","stylers","visibility","disableDoubleClickZoom","clickableIcons","CrimeMap","_s","dispatch","markerPosition","setMarkerPosition","address","setAddress","map","setMap","mapCenter","setMapCenter","lat","lng","locations","setLocations","geocodeLatLng","geocoder","google","maps","Geocoder","latlng","Promise","resolve","reject","geocode","location","results","status","formatted_address","handleMapClick","event","latitude","latLng","longitude","newCenter","panTo","LatLng","fetchedAddress","error","console","className","children","googleMapsApiKey","mapContainerClassName","center","zoom","onClick","onLoad","options","styles","mapTypeControl","fileName","_jsxFileName","lineNumber","columnNumber","position","_c","$RefreshReg$"],"sources":["/Users/davisnguyen/projects/crimecompass/frontend/src/components/CrimeMap.tsx"],"sourcesContent":["// Import packages\nimport React, { useState, useEffect } from 'react';\nimport { GoogleMap, LoadScript, Marker } from '@react-google-maps/api';\nimport { useDispatch } from 'react-redux';\nimport { setLocation } from '../redux/actions';\nimport '../styles/CrimeMap.css'\nimport ReportForm from '../components/ReportForm'\n\nconst mapStyles = [\n    {\n        featureType: \"poi\",\n        elementType: \"labels\",\n        stylers: [\n            { visibility: \"off\"}\n        ],\n        disableDoubleClickZoom: true,  // Add this line\n        clickableIcons: false,\n\n    }\n];\n\nconst CrimeMap: React.FC = () => {\n    const dispatch = useDispatch();\n    const [markerPosition, setMarkerPosition] = useState<{ lat: number, lng: number } | null>(null);\n    const [address, setAddress] = useState<string | null>(\"\"); // String or null value, will be initialized to null when app starts\n    const [map, setMap] = useState<google.maps.Map | null>(null);\n\n    const [mapCenter, setMapCenter] = useState({ lat: 37.8044, lng: -122.2712 }); // Initial center\n\n    const [locations, setLocations] = useState<{ lat: number, lng: number}[]>([]);\n\n    const geocodeLatLng = async (lat: number, lng: number) => {\n        const geocoder = new google.maps.Geocoder();\n        const latlng = { lat, lng };\n        return new Promise<string>((resolve, reject) => {\n            geocoder.geocode({ location: latlng }, (results, status) => {\n                if (status === \"OK\") {\n                    if (results && results[0]) {\n                        resolve(results[0].formatted_address);\n                    } else {\n                        reject(\"No results found\");\n                    }\n                } else {\n                    reject(\"Geocoder failed due to: \" + status);\n                }\n            });\n        });\n    };\n\n    // Fetch Locations\n    useEffect(() => {\n\n    }, []);\n    \n\n\n    const handleMapClick = async (event: any) => {\n        const latitude = event.latLng.lat();\n        const longitude = event.latLng.lng();\n        const newCenter = {lat: latitude, lng:longitude};\n        setMapCenter(newCenter);\n        setMarkerPosition({ lat: latitude, lng: longitude });\n\n        map?.panTo(new google.maps.LatLng(latitude, longitude));\n    \n        try {\n            const fetchedAddress = await geocodeLatLng(latitude, longitude); // Using await here\n            setAddress(fetchedAddress);\n            dispatch(setLocation(fetchedAddress))\n\n        } catch (error) {\n            console.error(\"Error getting address:\", error);\n        }\n    };\n    \n\n    return (\n        <div className=\"crime-map-wrapper\">\n            <LoadScript googleMapsApiKey={'AIzaSyCLu25wqirs0pAPnvjvH4hV4Se7Kcpzmps'}>\n                \n                <GoogleMap\n                    mapContainerClassName=\"crime-map-container\"\n                    center={mapCenter} // Default center (San Francisco)\n                    zoom={13}\n                    onClick={handleMapClick}\n                    onLoad={map => setMap(map)}\n                    options={{ \n                        styles: mapStyles, \n                        disableDoubleClickZoom: true,\n                        mapTypeControl: false,\n                        clickableIcons: false,\n                    }}\n                >\n                    <ReportForm/>\n                    {markerPosition && <Marker position={markerPosition} />}\n                </GoogleMap>\n            </LoadScript>\n\n        </div>\n    )\n}\nexport default CrimeMap;\n\n\n// Issues to fix after lunch. Fix how it looks in mobile. \n// Setup Database\n// Check for anymore other errors when using. \n// Retype each line of code so you remember how to use it. "],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}